

<div class="modal-body">
    <p class="text-muted text-center mb-4">
        Performance from <span class="fw-bold">{{ start_date|date:"M d, Y" }}</span> to <span class="fw-bold">{{ end_date|date:"M d, Y" }}</span>
    </p>

    <div class="table-responsive">
        <table class="table table-striped table-hover"> {# Removed table-sm for more default spacing #}
            <thead class="table-light">
                <tr>
                    {# Removed explicit width styles to allow browser to calculate based on content #}
                    <th scope="col">Product Name</th>
                    <th scope="col">SKU/Barcode</th>
                    <th scope="col" class="text-end">Units Sold</th>
                    <th scope="col" class="text-end">Revenue</th>
                    <th scope="col" class="text-end">Profit</th>
                    <th scope="col" class="text-end">Current Stock</th>
                </tr>
            </thead>
            <tbody>
                {% if top_selling_items %}
                    {% for item in top_selling_items %}
                    <tr>
                        <td>
                            {# Adjusted max-width slightly for product name if it was too restrictive #}
                            <div class="text-truncate" style="max-width: 200px;" title="{{ item.product__name }}">
                                <strong>{{ item.product__name }}</strong>
                            </div>
                        </td>
                        <td>
                            {# Adjusted max-width for barcode, and added a specific class for more control #}
                            <small class="text-muted product-barcode">{{ item.product__barcode }}</small>
                        </td>
                        <td class="text-end">{{ item.total_quantity_sold }}</td>
                        <td class="text-end">${{ item.total_revenue_from_item|floatformat:2 }}</td>
                        <td class="text-end">${{ item.total_profit_from_item|floatformat:2 }}</td>
                        <td class="text-end">{{ item.product__stock }}</td>
                    </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="6" class="text-center py-4">
                            No top-selling items found for the period.
                        </td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </div>
</div>

{# Removed the entire modal-footer div as requested #}

<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">

<style>
    .table-responsive {
        max-height: 450px;
        overflow-y: auto;
    }

    .text-truncate {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .product-barcode {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        max-width: 120px;
        display: block;
    }

    .table th, .table td {
        padding-top: 0.75rem;
        padding-bottom: 0.75rem;
        vertical-align: middle;
    }

    .table thead th {
        white-space: nowrap;
    }
</style>